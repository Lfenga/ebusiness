<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<base th:href="@{/}"><!-- 不用base就使用th:src="@{/js/jquery.min.js} -->
<meta charset="UTF-8">
<title>商品页面</title>
<link rel="stylesheet" href="css/bootstrap.min.css" />
<script src="js/jquery.min.js"></script>
<script type="text/javascript" th:inline="javascript">
	function putCart(){
		if(!(/(^[1-9]\d*$)/.test($("#buyNumber").val()))){
			alert("购买量请输入正整数!");
			$("#buyNumber").focus();
			return;
		}
		if(parseInt($("#buyNumber").val()) > parseInt($("#stock").text())){
			alert("购买量超出库存!");
			$("#buyNumber").focus();
			return;
		}
		//获取路径
		var pathName=window.document.location.pathname;
		//截取，得到项目名称
		var projectName=pathName.substring(0,pathName.substr(1).indexOf('/')+1);
		window.location.href = projectName + "/cart/putCart?id=" +  $("#gid").val() + "&buyNumber=" + $("#buyNumber").val();
	}
</script>
</head>
<body>
	<!-- 加载header.html -->
	<div th:include="user/header"></div>
	<div class="container">
		<div class="row">
			<div class="col-xs-12 col-sm-6 col-md-5">
				<img
					th:src="'images/' + ${goods.gpicture}"
					style="height: 220px; width: 280px; display: block; margin: 20px auto;">
			</div>
			<div class="col-xs-12 col-sm-6 col-md-7">
				<div style="padding: 20px;">
					<p><strong>商品名：</strong><span th:text="${goods.gname}"></span></p>
					<p>
						<strong>商品折扣价：</strong><span style="color: red; font-size: 20px;">&yen;
							<span th:text="${goods.grprice}"></span>
						</span>
					</p>
					<p>
						<strong>商品原价：</strong>
						<span class="text-dark" style="text-decoration: line-through;"> &yen;
							<span th:text="${goods.goprice}"></span>
						</span>
					</p>
					<p>
						<strong>商品类型：</strong><span th:text="${goods.typename}"></span>
					</p>
					<p>
						<strong>库存：</strong><span id="stock"  th:text="${goods.stock}"></span>
					</p>
					<p>
						<input type="text" size="12" class="form-control" placeholder="请输入购买量" id="buyNumber" name="buyNumber"/>
						<input type="hidden" name="gid" id="gid" th:value="${goods.id}"/>
					</p>
					<p>
						<a href="javascript:putCart()" class="btn btn-success">加入购物车</a>
					</p>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
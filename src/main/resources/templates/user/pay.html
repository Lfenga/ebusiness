<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<base th:href="@{/}">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è®¢å•æ”¯ä»˜ - eBusiness</title>
<link rel="stylesheet" href="css/bootstrap.min.css" />
<link rel="stylesheet" href="css/custom.css" />
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/common.js"></script>
<script type="text/javascript" th:inline="javascript">
	function pay(){
		// æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
		$('#payBtn').prop('disabled', true).html('<span class="loading-spinner" style="width: 20px; height: 20px; border-width: 2px; display: inline-block; vertical-align: middle; margin-right: 8px;"></span>å¤„ç†ä¸­...');
		
		$.ajax({
			url : [[@{/cart/pay}]],
			type : "post",
			contentType : "application/json",
			data : JSON.stringify({
				id : $("#oid").text()
			}),
			success : function(obj){
				showAlert("æ”¯ä»˜æˆåŠŸï¼æ­£åœ¨è·³è½¬...", "success");
				setTimeout(function() {
					var pathName=window.document.location.pathname;
					var projectName=pathName.substring(0,pathName.substr(1).indexOf('/')+1);
					window.location.href = projectName;
				}, 1500);
			},
	        error : function() {
				$('#payBtn').prop('disabled', false).html('ğŸ’³ ç«‹å³æ”¯ä»˜');
	            showAlert("æ”¯ä»˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼", "warning");
	        }
		});
	}
	
	function showAlert(message, type) {
		// ä½¿ç”¨å…¨å±€çš„showAlertå‡½æ•°ï¼ˆå·²åœ¨common.jsä¸­å®šä¹‰ï¼‰
		if (typeof window.showAlert === 'function') {
			window.showAlert(message, type);
		} else {
			// å…¼åº•æ–¹æ¡ˆ
			alert(message);
		}
	}
</script>
<style>
	body {
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		min-height: 100vh;
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 20px;
	}
	.success-card {
		background: white;
		border-radius: 16px;
		padding: 60px 40px;
		box-shadow: 0 8px 24px rgba(0,0,0,0.15);
		max-width: 600px;
		width: 100%;
		text-align: center;
	}
	.success-icon {
		font-size: 80px;
		margin-bottom: 20px;
		animation: bounce 1s ease;
	}
	@keyframes bounce {
		0%, 100% { transform: translateY(0); }
		50% { transform: translateY(-20px); }
	}
</style>
</head>
<body>
<div class="success-card">
	<div class="success-icon">âœ…</div>
	<h2 style="color: #2C3E50; font-weight: 700; margin-bottom: 20px;">è®¢å•æäº¤æˆåŠŸï¼</h2>
	<p style="color: #6C757D; font-size: 16px; margin-bottom: 30px;">
		æ„Ÿè°¢æ‚¨çš„è´­ä¹°ï¼Œæ‚¨çš„è®¢å•å·²æˆåŠŸæäº¤
	</p>
	
	<div style="background: linear-gradient(135deg, #FFF5F5 0%, #FFE5E5 100%); padding: 30px; border-radius: 12px; margin-bottom: 40px;">
		<p style="color: #6C757D; font-size: 14px; margin-bottom: 10px;">è®¢å•ç¼–å·</p>
		<p style="color: #FF6B6B; font-size: 32px; font-weight: 700; margin: 0;">
			<span id="oid" th:text="${order.id}"></span>
		</p>
	</div>
	
	<div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
		<button onclick="pay()" id="payBtn" class="btn btn-custom-primary btn-lg btn-icon">
			<span style="font-size: 18px;">ğŸ’³</span>
			<span>ç«‹å³æ”¯ä»˜</span>
		</button>
		<a href="cart/myOder" class="btn btn-custom-secondary btn-lg">
			æŸ¥çœ‹è®¢å•
		</a>
		<a href="/" class="btn btn-default btn-lg">
			è¿”å›é¦–é¡µ
		</a>
	</div>
	
	<div style="margin-top: 40px; padding-top: 30px; border-top: 1px solid #E9ECEF;">
		<p style="color: #6C757D; font-size: 14px; margin: 0;">
			ğŸ’¡ æ¸©é¦¨æç¤ºï¼šè¯·å°½å¿«å®Œæˆæ”¯ä»˜ï¼Œè¶…æ—¶è®¢å•å°†è‡ªåŠ¨å–æ¶ˆ
		</p>
	</div>
</div>
</body>
</html>
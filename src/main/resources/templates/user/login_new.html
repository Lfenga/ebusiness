<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<base th:href="@{/}">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç”¨æˆ·ç™»å½• - eBusiness</title>
<link rel="stylesheet" href="css/bootstrap.min.css" />
<link rel="stylesheet" href="css/custom.css" />
<script src="js/jquery.min.js"></script>
<script type="text/javascript" th:inline="javascript">
	function refreshCode(){
		document.getElementById("mycode").src = [[@{/validateCode}]] + "?t=" + Math.random();
	}
</script>
<style>
	body {
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		min-height: 100vh;
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 20px;
	}
</style>
</head>
<body>
	<div class="form-custom" style="max-width: 500px; width: 100%;">
		<div class="form-header">
			<h3>ğŸ” ç”¨æˆ·ç™»å½•</h3>
			<p style="margin: 10px 0 0 0; font-size: 14px; opacity: 0.9;">æ¬¢è¿å›æ¥ï¼è¯·ç™»å½•æ‚¨çš„è´¦å·</p>
		</div>
		
		<!-- é”™è¯¯/æˆåŠŸæç¤ºåŒºåŸŸ -->
		<div th:if="${param.error}" class="alert alert-custom alert-danger">
			<strong>âŒ ç™»å½•å¤±è´¥ï¼</strong><br>
			<span th:if="${param.error == 'captcha'}">éªŒè¯ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥</span>
			<span th:if="${param.error == 'true'}">ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œè¯·æ£€æŸ¥åé‡è¯•</span>
		</div>
		<div th:if="${param.logout}" class="alert alert-custom alert-success">
			<strong>âœ… å·²æˆåŠŸç™»å‡º</strong>
		</div>
		<div th:if="${param.passwordChanged}" class="alert alert-custom alert-success">
			<strong>âœ… å¯†ç ä¿®æ”¹æˆåŠŸï¼Œè¯·ä½¿ç”¨æ–°å¯†ç ç™»å½•</strong>
		</div>
		
		<form action="user/securityLogin" name="myform" method="post" role="form">
			<div class="form-group">
				<label>ğŸ“§ é‚®ç®±åœ°å€</label>
				<input type="email" class="form-control" name="bemail" 
					   placeholder="è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€" required 
					   autofocus />
			</div>
		
			<div class="form-group">
				<label>ğŸ”’ ç™»å½•å¯†ç </label>
				<input type="password" class="form-control" name="bpwd" 
					   placeholder="è¯·è¾“å…¥æ‚¨çš„ç™»å½•å¯†ç " required />
			</div>
			 
			<div class="form-group">
				<label>ğŸ”¢ éªŒè¯ç </label>
				<div style="display: flex; gap: 10px; align-items: center;">
					<input type="text" class="form-control" name="code" 
						   placeholder="è¯·è¾“å…¥éªŒè¯ç " required 
						   style="flex: 1;" />
					<img th:src="@{/validateCode}" id="mycode" 
						 style="height: 46px; border-radius: 8px; cursor: pointer; border: 2px solid #E9ECEF;"
						 onclick="refreshCode()" 
						 title="ç‚¹å‡»åˆ·æ–°éªŒè¯ç ">
				</div>
				<p style="margin-top: 8px; color: #6C757D; font-size: 13px;">
					ğŸ’¡ çœ‹ä¸æ¸…ï¼Ÿç‚¹å‡»å›¾ç‰‡åˆ·æ–°
				</p>
			</div>
			 
			<div class="form-group" style="margin-top: 30px;">
				<button type="submit" class="btn btn-custom-primary btn-block btn-lg">
					ç™»å½•
				</button>
			</div>
			
			<div class="form-group text-center">
				<button type="reset" class="btn btn-default">é‡ç½®</button>
				<span style="margin: 0 10px; color: #CCC;">|</span>
				<a href="user/toRegister" style="color: #667eea; font-weight: 600;">
					æ²¡æœ‰è´¦å·ï¼Ÿç«‹å³æ³¨å†Œ
				</a>
			</div>
		</form>
		
		<div class="text-center" style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #E9ECEF;">
			<a href="/eBusiness" style="color: #667eea; font-weight: 600;">
				â† è¿”å›é¦–é¡µ
			</a>
		</div>
	</div>
</body>
</html>

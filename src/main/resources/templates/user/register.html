<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<base th:href="@{/}">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç”¨æˆ·æ³¨å†Œ - eBusinessè´­ç‰©å¹³å°</title>
<script src="js/jquery.min.js"></script>
<script src="js/common.js"></script>
<script type="text/javascript" th:inline="javascript">
	function checkEmail(){
		if(checkNull($("#bemail").val(), "è¯·è¾“å…¥é‚®ç®±ï¼")){
			$.ajax({
				url : [[@{/user/isUse}]],
				type : "post",
				contentType : "application/json",
				data : JSON.stringify({
					bemail : $("#bemail").val()
				}),
				success : function(obj){
					if(obj == "no"){
						$("#isExit").html('<span class="form-validation-error">âœ—</span>');
						showAlert("è¯¥é‚®ç®±å·²è¢«æ³¨å†Œï¼Œè¯·æ›´æ¢ï¼", "warning");
					}else{
						$("#isExit").html('<span class="form-validation-success">âœ“</span>');
						showAlert("é‚®ç®±å¯ç”¨ï¼", "success");
					}
				},
		        error : function() {
		            showAlert("å¤„ç†å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•ï¼", "warning");
		        }
			});
		}
	}

	function checkBpwd(){
		if($("#bpwd").val() != $("#rebpwd").val()){
			showAlert("ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´ï¼Œè¯·é‡æ–°è¾“å…¥ï¼", "warning");
			return false;
		}
		document.myform.submit();
	}

	function showAlert(message, type) {
		// ä½¿ç”¨å…¨å±€çš„showAlertå‡½æ•°ï¼ˆå·²åœ¨common.jsä¸­å®šä¹‰ï¼‰
		window.showAlert(message, type);
	}
	
	function checkNull(value, message) {
		if (!value || value.trim() === '') {
			showAlert(message, "warning");
			return false;
		}
		return true;
	}
</script>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
        background: url('imgs/èƒŒæ™¯.png') no-repeat center center fixed;
        background-size: 99% 97%;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* å‘å³åç§»ä½ç½® */
    .offset-container {
        margin-left: calc((100vw - 600px) * 0.85);
        margin-right: calc((100vw - 600px) * 0.15);
    }

    .container {
        background: rgba(255, 255, 255, 0.95);
        padding: 60px 50px;
        border-radius: 20px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        width: 450px;
        max-width: 90%;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    /* Decorative top bar */
    .container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(90deg, #ff6b6b, #ff8e53);
    }

    h2 {
        margin-bottom: 30px;
        color: #333;
        font-weight: 700;
        font-size: 26px;
    }

    .form-group {
        margin-bottom: 20px;
        text-align: left;
        position: relative;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        color: #555;
        font-size: 14px;
        font-weight: 500;
    }

    .form-group input {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid #e1e1e1;
        border-radius: 8px;
        outline: none;
        transition: all 0.3s;
        font-size: 14px;
        background: #f9f9f9;
    }

    .form-group input:focus {
        border-color: #ff6b6b;
        background: #fff;
        box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
    }

    .btn {
        width: 100%;
        padding: 14px;
        background: linear-gradient(45deg, #ff6b6b, #ff8e53);
        border: none;
        border-radius: 8px;
        color: white;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 15px;
        box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
    }

    .links {
        margin-top: 25px;
        font-size: 14px;
        color: #888;
    }

    .links a {
        color: #ff6b6b;
        text-decoration: none;
        font-weight: 500;
        margin-left: 5px;
        transition: color 0.2s;
    }

    .links a:hover {
        color: #e55a5a;
        text-decoration: underline;
    }

    /* Email validation group */
    .email-group {
        display: flex;
        gap: 10px;
    }

    .email-input {
        flex: 1;
    }

    .validation-status {
        min-width: 30px;
        height: 42px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        border-radius: 8px;
        background: #f9f9f9;
        border: 1px solid #e1e1e1;
    }

    .form-validation-error {
        color: #e74c3c !important;
        font-weight: bold;
    }

    .form-validation-success {
        color: #27ae60 !important;
        font-weight: bold;
    }

    /* Reset button */
    .btn-reset {
        background: #f8f9fa;
        color: #6c757d;
        border: 1px solid #dee2e6;
        padding: 12px 20px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
    }

    .btn-reset:hover {
        background: #e9ecef;
        transform: translateY(-2px);
    }

    /* Form actions */
    .form-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 20px;
    }

    .field-error {
        color: #e74c3c;
        font-size: 13px;
        margin-top: 5px;
        display: block;
    }
</style>
</head>
<body>
    <div class="container offset-container">
        <h2>ç”¨æˆ·æ³¨å†Œ</h2>

        <form action="user/register" name="myform" method="post" th:object="${bUser}" role="form">
            <div class="form-group">
                <label for="bemail">ğŸ“§ é‚®ç®±åœ°å€</label>
                <div class="email-group">
                    <input type="email" id="bemail" class="form-control email-input"
                           placeholder="è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€"
                           th:field="*{bemail}"
                           onblur="checkEmail()"
                           required
                           autofocus />
                    <span id="isExit" class="validation-status"></span>
                </div>
                <span th:errors="*{bemail}" class="field-error"></span>
            </div>

            <div class="form-group">
                <label for="bpwd">ğŸ”’ è®¾ç½®å¯†ç </label>
                <input type="password" id="bpwd" class="form-control"
                       placeholder="è¯·è®¾ç½®6-20ä½å¯†ç "
                       th:field="*{bpwd}"
                       required />
                <span th:errors="*{bpwd}" class="field-error"></span>
            </div>

            <div class="form-group">
                <label for="rebpwd">ğŸ”‘ ç¡®è®¤å¯†ç </label>
                <input type="password" id="rebpwd" class="form-control"
                       placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç "
                       th:field="*{rebpwd}"
                       required />
            </div>

            <button type="button" onclick="checkBpwd()" class="btn">
                ç«‹å³æ³¨å†Œ
            </button>

            <div class="form-actions">
                <button type="reset" class="btn-reset">é‡ç½®</button>
                <a href="user/toLogin" class="links">
                    å·²æœ‰è´¦å·ï¼Ÿç«‹å³ç™»å½•
                </a>
            </div>
        </form>
    </div>
</body>
</html>

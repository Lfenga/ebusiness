<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<base th:href="@{/}">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è®¢å•è¯¦æƒ… - eBusiness</title>
<link rel="stylesheet" href="css/bootstrap.min.css" />
<link rel="stylesheet" href="css/custom.css" />
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/starfield.js"></script>
<script src="js/particles.js"></script>
</head>
<body>
<div th:include="user/header"></div>

<div class="container page-transition" style="margin-top: 30px; margin-bottom: 60px;">
	<!-- é¢åŒ…å±‘å¯¼èˆª -->
	<ol class="breadcrumb breadcrumb-custom">
		<li><a th:href="@{/}">é¦–é¡µ</a></li>
		<li><a th:href="@{/cart/myOder}">æˆ‘çš„è®¢å•</a></li>
		<li class="active">è®¢å•è¯¦æƒ…</li>
	</ol>
	
	<!-- è®¢å•çŠ¶æ€è¿›åº¦æ¡ -->
	<div class="panel-custom" th:unless="${#lists.isEmpty(orderDetail)}">
		<div class="panel-body">
			<div class="order-progress">
				<div class="order-progress-line" style="width: 75%;"></div>
				<div class="order-step completed">
					<div class="order-step-icon">ğŸ“</div>
					<div class="order-step-label">ä¸‹å•æˆåŠŸ</div>
				</div>
				<div class="order-step completed">
					<div class="order-step-icon">ğŸ’³</div>
					<div class="order-step-label">æ”¯ä»˜å®Œæˆ</div>
				</div>
				<div class="order-step active">
					<div class="order-step-icon">ğŸšš</div>
					<div class="order-step-label">å•†å“é…é€</div>
				</div>
				<div class="order-step">
					<div class="order-step-icon">âœ…</div>
					<div class="order-step-label">ç¡®è®¤æ”¶è´§</div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="panel-custom">
		<div class="panel-heading">
			<h3 class="panel-title">ğŸ“‹ è®¢å•è¯¦æƒ…</h3>
		</div>
		<div class="panel-body">
			<div class="table-responsive">
				<table class="table table-custom">
					<thead>
						<tr>
							<th class="text-center">å•†å“ç¼–å·</th>
							<th class="text-center">å•†å“å›¾ç‰‡</th>
							<th class="text-center">å•†å“åç§°</th>
							<th class="text-center">è´­ä¹°ä»·æ ¼</th>
							<th class="text-center">è´­ä¹°æ•°é‡</th>
							<th class="text-center">å°è®¡</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="od:${orderDetail}">
							<td class="text-center" style="vertical-align: middle; font-weight: 600;">
								<span th:text="${od.id}"></span>
							</td>
							<td class="text-center">
								<a th:href="'goodsDetail?id=' + ${od.id}"> 
									<img th:src="'images/' + ${od.gpicture}"
										 class="table-img"
										 alt="å•†å“å›¾ç‰‡">
								</a>
							</td>
							<td class="text-center" style="vertical-align: middle;">
								<a th:href="'goodsDetail?id=' + ${od.id}" 
								   style="color: #2C3E50; font-weight: 600; text-decoration: none;">
									<span th:text="${od.gname}"></span>
								</a>
							</td>
							<td class="text-center" style="vertical-align: middle;">
								<span style="color: var(--primary-color); font-weight: 700; font-size: 16px;">
									Â¥<span th:text="${od.grprice}"></span>
								</span>
							</td>
							<td class="text-center" style="vertical-align: middle;">
								<span class="badge-custom" style="background: #E9ECEF; color: #2C3E50; font-size: 14px;">
									Ã—<span th:text="${od.shoppingnum}"></span>
								</span>
							</td>
							<td class="text-center" style="vertical-align: middle;">
								<span style="color: var(--primary-color); font-weight: 700; font-size: 18px;">
									Â¥<span class="order-subtotal" th:text="${od.grprice * od.shoppingnum}"></span>
								</span>
							</td>
						</tr>
						<!-- ç©ºçŠ¶æ€ -->
						<tr th:if="${#lists.isEmpty(orderDetail)}">
							<td colspan="6">
								<div class="empty-state">
									<div class="empty-state-icon">ğŸ“¦</div>
									<p class="empty-state-text">æš‚æ— è®¢å•è¯¦æƒ…</p>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			
			<!-- æ“ä½œæŒ‰é’® -->
			<div style="margin-top: 30px; text-align: center;">
				<a th:href="@{/cart/myOder}" class="btn btn-custom-secondary btn-lg">
					â† è¿”å›è®¢å•åˆ—è¡¨
				</a>
				<a th:href="@{/}" class="btn btn-custom-primary btn-lg" style="margin-left: 15px;">
					ç»§ç»­è´­ç‰©
				</a>
			</div>
		</div>
	</div>
</div>

<script>
$(document).ready(function() {
	// è®¢å•è¿›åº¦æ¡åŠ¨ç”»
	if (window.particleSystem) {
		window.particleSystem.animateOrderProgress(2); // 2ä¸ºå·²å®Œæˆçš„æ­¥éª¤æ•°
	}
	
	// ä¸ºå°è®¡é‡‘é¢æ·»åŠ æ•°å­—æ»šåŠ¨åŠ¨ç”»
	$('.order-subtotal').each(function(index) {
		var $this = $(this);
		var finalValue = parseFloat($this.text());
		if (!isNaN(finalValue) && window.particleSystem) {
			setTimeout(function() {
				window.particleSystem.animateNumber($this[0], 0, finalValue, 700);
			}, index * 100);
		}
	});
});
</script>
</body>
</html>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<base th:href="@{/}">
<meta charset="UTF-8">
<title>ç”¨æˆ·åˆ—è¡¨ - ç”µå•†ç®¡ç†ç³»ç»Ÿ</title>
<link rel="stylesheet" href="css/bootstrap.min.css" />
<link rel="stylesheet" href="css/ruoyi-admin.css" />
<script src="js/jquery.min.js"></script>
<script src="js/common.js"></script>
<script type="text/javascript" th:inline="javascript">
	function deleteUsers(tid){
		$.ajax(
			{
				//è¯·æ±‚è·¯å¾„ï¼Œè¦æ³¨æ„çš„æ˜¯urlå’Œth:inline="javascript"
				url : [[@{/deleteUser}]],
				//è¯·æ±‚ç±»å‹
				type : "post",
				//dataè¡¨ç¤ºå‘é€çš„æ•°æ®
				data : {
					id : tid
				},
				//æˆåŠŸå“åº”çš„ç»“æœ
				success : function(obj){//objå“åº”æ•°æ®
					if(obj == "no"){
						showAlert("è¯¥ç”¨æˆ·æœ‰å…³è”ä¸å…è®¸åˆ é™¤ï¼", "warning");
					}else{
						showConfirm({
							title: 'åˆ é™¤ç¡®è®¤',
							message: 'çœŸçš„åˆ é™¤è¯¥ç”¨æˆ·å—ï¼Ÿ',
							type: 'danger',
							confirmText: 'åˆ é™¤',
							cancelText: 'å–æ¶ˆ'
						}).then(confirmed => {
							if (confirmed) {
								//è·å–è·¯å¾„
								var pathName=window.document.location.pathname;
								//æˆªå–ï¼Œå¾—åˆ°é¡¹ç›®åç§°
								var projectName=pathName.substring(0,pathName.substr(1).indexOf('/')+1);
								window.location.href = projectName + obj;
							}
						});
					}
				},
		        error : function() {
		            showAlert("å¤„ç†å¼‚å¸¸ï¼", "error");
		        }
			}	
		);
	}
	</script>
	<script type="text/javascript" th:inline="javascript">
	function deleteUsers(tid){
		confirmDelete(tid, [[@{/deleteUser}]], 'ç¡®å®šè¦åˆ é™¤è¯¥ç”¨æˆ·å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼');
	}
	</script>
</head>
<body>
	<div th:replace="admin/header::myheader"></div>
	
	<div class="main-content">
		<div class="page-container">
			<div class="page-header">
				<h1 class="page-title">ğŸ‘¥ ç”¨æˆ·åˆ—è¡¨</h1>
			</div>
			
			<div class="table-wrapper">
				<table class="custom-table">
					<thead>
						<tr>
							<th class="text-center">ç”¨æˆ·ID</th>
							<th>ç”¨æˆ·é‚®ç®±</th>
							<th class="text-center">æ“ä½œ</th>
						</tr>
					</thead>
					<tbody>
						<tr th:if="${#lists.isEmpty(allUsers)}">
							<td colspan="3" class="text-center">
								<div class="empty-state">
									<div class="empty-state-icon">ğŸ‘¥</div>
									<div class="empty-state-text">æš‚æ— ç”¨æˆ·æ•°æ®</div>
								</div>
							</td>
						</tr>
						<tr th:each="u:${allUsers}">
							<td class="text-center" th:text="${u.id}"></td>
							<td th:text="${u.bemail}"></td>
							<td class="text-center table-actions">
								<button class="action-btn action-btn-delete" 
										th:onclick="'deleteUsers(' + ${u.id} + ')'">ğŸ—‘ï¸ åˆ é™¤</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			
			<div class="pagination-container">
				<ul class="pagination">
					<li th:class="${currentPage == 1 ? 'disabled' : ''}">
						<a th:href="@{selectUser(currentPage=${currentPage - 1})}">&laquo;</a>
					</li>
					<li th:each="i : ${#numbers.sequence(1, totalPage)}" 
						th:class="${i == currentPage ? 'active' : ''}">
						<a th:href="@{selectUser(currentPage=${i})}" th:text="${i}">1</a>
					</li>
					<li th:class="${currentPage == totalPage ? 'disabled' : ''}">
						<a th:href="@{selectUser(currentPage=${currentPage + 1})}">&raquo;</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
</body>
</html>

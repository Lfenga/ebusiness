<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<base th:href="@{/}">
<meta charset="UTF-8">
<title>商品管理 - 电商管理系统</title>
<link rel="stylesheet" href="css/bootstrap.min.css" />
<link rel="stylesheet" href="css/ruoyi-admin.css" />
<script src="js/jquery.min.js"></script>
<script src="js/common.js"></script>
<script type="text/javascript" th:inline="javascript">
	var deleteUrl = /*[[@{/goods/delete}]]*/ '/goods/delete';
	function deleteGoods(tid){
		confirmDelete(tid, deleteUrl, '确定要删除该商品吗？此操作不可恢复！');
	}
</script>
</head>
<body>
	<!-- 加载header.html -->
	<div th:replace="admin/header::myheader"></div>
	
	<div class="main-content">
		<div class="page-container">
			<div class="page-header">
				<h1 class="page-title">商品管理</h1>
			</div>
			
			<div class="action-buttons">
				<div class="btn-group-left">
					<a th:href="@{/goods/toAddGoods}" class="btn-custom btn-primary">
						➕ 添加商品
					</a>
					<button onclick="location.reload()" class="btn-custom btn-info">
						🔄 刷新
					</button>
				</div>
				<div>
					<span style="color: #909399;">共 <strong th:text="${#lists.size(allGoods)}">0</strong> 条数据</span>
				</div>
			</div>
			
			<div class="table-wrapper">
				<table class="custom-table">
					<thead>
						<tr>
							<th class="text-center">商品ID</th>
							<th>商品名称</th>
							<th class="text-center">商品类型</th>
							<th class="text-center">商品状态</th>
							<th class="text-center">操作</th>
						</tr>
					</thead>
					<tbody>
						<tr th:if="${#lists.isEmpty(allGoods)}">
							<td colspan="5" class="text-center">
								<div class="empty-state">
									<div class="empty-state-icon">📦</div>
									<div class="empty-state-text">暂无商品数据</div>
								</div>
							</td>
						</tr>
						<tr th:each="gds:${allGoods}">
							<td class="text-center" th:text="${gds.id}"></td>
							<td th:text="${gds.gname}"></td>
							<td class="text-center" th:text="${gds.typename}"></td>
							<td class="text-center">
								<span th:class="${gds.status == 1 ? 'status-badge status-badge-success' : 'status-badge status-badge-danger'}" 
									  th:text="${gds.status == 1 ? '上架' : '下架'}"></span>
							</td>
							<td class="text-center table-actions">
								<div class="action-btn-group">
									<a th:href="@{goods/detail(id=${gds.id},act=detail)}" class="action-btn action-btn-detail" target="_blank">📄 详情</a>
									<a th:if="${act} == 'updateSelect'" th:href="@{goods/detail(id=${gds.id},act=update)}" class="action-btn action-btn-edit" target="_blank">✏️ 修改</a>
									<button th:if="${act} == 'deleteSelect'" th:onclick="'deleteGoods(' + ${gds.id} + ')'" class="action-btn action-btn-delete">🗑️ 删除</button>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			
			<div class="pagination-container" th:if="${totalPage != null && totalPage > 0}">
				<ul class="pagination">
					<li th:class="${currentPage == 1 ? 'disabled' : ''}">
						<a th:href="${currentPage > 1 ? '@{/goods/selectAllGoodsByPage(currentPage=' + (currentPage - 1) + ',act=' + act + ')}' : 'javascript:void(0)'}" 
						   aria-label="Previous">
							<span aria-hidden="true">&laquo; 上一页</span>
						</a>
					</li>
					<li th:each="i : ${#numbers.sequence(1, totalPage)}" 
					    th:class="${i == currentPage ? 'active' : ''}">
						<a th:href="@{/goods/selectAllGoodsByPage(currentPage=${i},act=${act})}" th:text="${i}">1</a>
					</li>
					<li th:class="${currentPage == totalPage ? 'disabled' : ''}">
						<a th:href="${currentPage < totalPage ? '@{/goods/selectAllGoodsByPage(currentPage=' + (currentPage + 1) + ',act=' + act + ')}' : 'javascript:void(0)'}" 
						   aria-label="Next">
							<span aria-hidden="true">下一页 &raquo;</span>
						</a>
					</li>
					<li class="disabled">
						<a>第 <span th:text="${currentPage}"></span> / <span th:text="${totalPage}"></span> 页</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
</body>
</html>
